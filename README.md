# Scorecards for the Global Healthy and Sustainable Cities Indicator Collaboration Study

The code in this repository draws on results from the [Global Healthy and Sustainable Cities Indicator Collaboration Study](https://github.com/global-healthy-liveable-cities/global-indicators) to generate policy 'scorecard' reports.

The respository is ideally located as a subfolder of the study's spatial components repository, located within the [analysis](https://github.com/global-healthy-liveable-cities/global-indicators/tree/main/analysis) folder.

The input data required are described in the global_scorecards.py file; this data may be awaiting publication to be made public, and is not located in this nor the spatial repository at this stage:

```
gpkg_hexes = os.path.abspath('../../process/data/output/global_indicators_hex_250m_2021-06-21.gpkg')
csv_city_indicators = os.path.abspath("../../process/data/output/global_indicators_city_2021-06-21.csv")
csv_hex_indicators = os.path.abspath("../../process/data/output/global_indicators_hex_250m_2021-06-21.csv")
csv_thresholds_data = os.path.abspath("data/Global Indicators 2020 - thresholds summary estimates.csv")
xlsx_policy_data = os.path.abspath("data/Policy Figures 1 & 2_23 Dec_numerical.xlsx")
xlsx_scorecard_template = 'scorecard_template_elements.xlsx'
```

Python modules required for running the code include pandas, geopandas, and fpdf2 (for PDF generation).

With the required modules installed and data resources available relative to the project directory in the paths listed above, the scorecards can be generated by running the global_scorecards.py Python script.
```
 python .\global_scorecards.py --help
usage: global_scorecards.py [-h] [--cities CITIES] [--generate_resources] [--language LANGUAGE]

Scorecards for the Global Healthy and Sustainable Cities Indicator Collaboration Study

optional arguments:
  -h, --help            show this help message and exit
  --cities CITIES       A list of cities, for example: Baltimore, Phoenix, Seattle, Adelaide, Melbourne, Sydney,
                        Auckland, Bern, Odense, Graz, Cologne, Ghent, Belfast, Barcelona, Valencia, Vic, Lisbon,
                        Olomouc, Hong, Kong, Mexico City, Sao, Paulo, Bangkok, Hanoi, Maiduguri, Chennai
  --generate_resources  Generate images from input data for each city? Default is False.
  --language LANGUAGE   The desired language for presentation, as defined in the template workbook languages sheet.
```

So, given available translations have been defined, the follow would generate scorecards for Barcelona, Valencia, Vic and Mexico City in Spanish:
```
python --cities "Barcelona, Valencia, Vic, Mexico City" --language Spanish --generate_resources
```

The code identifies required data sources, and extracts key information which is passed to functions in scorecard_functions.py to generate resources, format pages, and output the final PDF layout, according to the locations and pages specified in the scorecard_template_elements.xlsx file [^1].   

Carl Higgs
carl.higgs@rmit.edu.au


[^1]: The scorecard_template_elements.xlsx file makes use of relative formulas for placement of nested elements.  This makes it easier to quickly move entire blocks of content around the page when fine-tuning the template, compared with a plain text format like CSV.  It also contains multiple worksheets, used to define phrases in different languages and their associated font type faces.
